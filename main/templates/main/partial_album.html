{% load fmt %}
<div class="row">

    <div class="col-2" id="lyrics-container">
        <a href="#"
           hx-get="/lyrics/{{ current_song_id }}/"
           hx-trigger="load"
           hx-target="#lyrics-container"
           hx-swap="innerHTML">
        </a>
    </div>


    <div class="col-10">
        <div class="row">

            <div class="col-4 d-flex justify-content-start">
                {% for album in albums_before %}
                    {% include 'main/snippet_album.html' with album=album %}
                {% endfor %}
            </div>

            <div class="col-4 d-flex justify-content-center" style="z-index: 1;">
                <div class="d-flex align-items-start">
                    <img class="img-fluid" src="{% url 'album_art' album.songs.first.id %}"
                         style="max-height: 6em; padding-right: 1em;"
                         alt="{{ album.name }} album art"/>
                    <div class="d-block">
                        <div class="album-meta">
                            <h6><em><span>#{{ album.artist.rank }}</span></em></h6>
                            <h5><span>#{{ album.rank }}</span></h5>
                            <h6><span>{{ album.total_length|dur }}</span></h6>
                        </div>
                        <div class="album-details">
                            <h6><em>{{ album.artist.name }}</em></h6>
                            <h5>{{ album.name }}</h5>
                            <h6><small>{{ album.year }}</small></h6>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-4 d-flex justify-content-end">
                {% for album in albums_after %}
                    {% include 'main/snippet_album.html' with album=album %}
                {% endfor %}
            </div>

        </div>

        <div class="row">
            <div class="col">
                <table class="table table-striped table-sm" style="font-size: 0.8em;">
                    <thead>
                    <tr>
                        <th>Rank</th>
                        <th colspan="2" class="text-center">Rating</th>
                        <th>Track</th>
                        <th style="padding-left: 2em;">Title</th>
                        <th>Duration</th>
                        <th>Plays</th>
                        <th>Last Played</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for song in songs %}
                        <tr class="{% if song.id == current_song_id %}fw-bold{% endif %}">
                            <td>{{ song.rank }}</td>
                            <td class="text-end">
                                <span class="text-muted small">{{ song.count_rated }} @</span>
                                {{ song.rating|perc }}
                            </td>
                            <td>{% iconrank song.rating 5 1 0 %}</td>
                            <td>{{ song|trck }}</td>
                            <td>
                                <a class="play-icon" href="#" style="font-size: 0.8em;"
                                   hx-get="/lyrics/{{ song.id }}/"
                                   hx-target="#lyrics-container"
                                   hx-swap="innerHTML">
                                    <i class="bi bi-music-note-list"></i>
                                </a>
                                <a class="play-icon"
                                   href="#"
                                   hx-get="/next-song/?demand=song_{{ song.id }}"
                                   hx-target="#player-container"
                                   hx-swap="innerHTML">
                                    <i class="bi bi-play-circle"></i>
                                </a>
                                {{ song.name }}
                            </td>
                            <td>{{ song.track_length|dur }}</td>
                            <td>{{ song.count_played }}</td>
                            <td>{{ song.played_at|days_ago }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>
